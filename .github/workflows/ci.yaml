# Main Continuous Integration Pipeline
#
# This workflow runs on every push and pull request to the main branch.
# It orchestrates the complete CI/CD pipeline by calling reusable workflows.
#
# Jobs:
#   - format: Validates markdown and YAML file formatting
#   - test-local: Tests the action using current repository code
#   - test-stable: Tests the published stable action version
#
# Permissions:
#   - actions: write - Required for workflow management
#   - contents: read - Required to checkout repository code

name: CI
on:
  pull_request:
    branches:
      - main
  push:
    branches:
      - main
  workflow_dispatch: # to trigger manually

permissions:
  actions: write
  contents: read

jobs:
  format:
    uses: ./.github/workflows/format.yaml
  test-local:
    uses: ./.github/workflows/test-local.yaml
  test-stable:
    uses: ./.github/workflows/test-stable.yaml
