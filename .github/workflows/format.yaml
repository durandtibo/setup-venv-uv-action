# Code Formatting and Linting Workflow
#
# This reusable workflow validates code formatting and style across the repository.
# It runs as part of the CI pipeline and can also be triggered manually.
#
# Jobs:
#   - markdown: Validates Markdown files using markdownlint
#     - Checks formatting, line length, heading structure
#     - Configuration: .markdownlint.json
#
#   - yaml: Validates YAML files using yamllint
#     - Checks syntax, indentation, line length
#     - Configuration: .yamllint.yaml
#
# Configuration Files:
#   - .markdownlint.json: Markdown linting rules
#   - .yamllint.yaml: YAML linting rules
#
# Permissions:
#   - contents: read - Required to checkout repository code

name: Format
on:
  workflow_call:
  workflow_dispatch: # to trigger manually

permissions:
  contents: read

jobs:
  markdown:
    runs-on: ubuntu-latest
    timeout-minutes: 10

    steps:
      - name: Checkout repo
        uses: actions/checkout@v6

      - name: Set up Node.js
        uses: actions/setup-node@v6
        with:
          node-version: "latest"

      - name: Install markdownlint-cli
        run: npm install -g markdownlint-cli

      - name: Run markdownlint
        run: markdownlint -- **/*.md

  yaml:
    runs-on: ubuntu-latest
    timeout-minutes: 10

    steps:
      - name: Checkout repo
        uses: actions/checkout@v6

      - name: Install yamllint
        run: |
          sudo apt-get update
          sudo apt-get install -y yamllint

      - name: Run yamllint
        run: |
          echo "üîç Running yamllint..."
          yamllint -f colored .
